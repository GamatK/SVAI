<!DOCTYPE html>
<html lang="en">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SVAI</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
</head>
<body>
  <header class="nav">
    <div class="brand">SVAI</div>
    <nav class="tabs">
      <button class="tab active" data-target="#civic">CivicBot</button>
      <button class="tab" data-target="#wallet">Emergency Wallet</button>
      <button class="tab" data-target="#dashboard">Doctor Dashboard</button>
      <button id="themeBtn" class="tab">Toggle Theme</button>
    </nav>
  </header>

  <main class="container">
    <!-- CivicBot -->
    <section id="civic" class="card show">
      <h2>Find Government Steps</h2>
      <div class="row">
        <input id="topic" list="topics" placeholder="e.g., birth certificate" value="birth certificate" />
        <datalist id="topics">
          <option value="birth certificate"></option>
          <option value="marriage certificate"></option>
          <option value="id card"></option>
        </datalist>
        <button id="askBtn">Get Steps</button>
      </div>
      <div id="civicStatus" class="status" aria-live="polite"></div>
      <ol id="steps" class="steps"></ol>

      <!-- Open CivicBot phone-like chat (CSS :target → always works) -->
      <div class="row" style="margin-top:8px">
        <a href="#civicModal" id="openCivic" class="btn">Open CivicBot</a>
      </div>
    </section>

    <!-- Emergency Wallet -->
    <section id="wallet" class="card">
      <h2>Emergency Wallet</h2>
      <p class="muted">One-tap access to ID mini-card & ICE contact</p>

      <button id="walletBtn">Show Info</button>

      <div class="row" style="gap:8px; margin:8px 0">
        <button id="printBtn">Print Card</button>
        <button id="dlBtn">Download PNG</button>
        <button id="shareBtn">Quick Share</button>
      </div>

      <div id="walletBox" class="wallet-box hidden">
        <div><strong>Name:</strong> <span id="wName">—</span></div>
        <div>
          <strong>ID:</strong> <span id="wId">—</span>
          <button id="copyIdBtn" style="margin-left:8px">Copy</button>
        </div>
        <div><strong>ICE:</strong> <span id="wIce">—</span></div>
        <div><strong>Notes:</strong> <span id="wNotes">—</span></div>
        <div class="qr" id="qrBox" aria-label="QR placeholder">QR</div>
      </div>

      <div class="row" style="margin-top:12px">
        <input id="nameIn" placeholder="Name (optional)" />
        <input id="idIn" placeholder="ID (optional)" />
        <input id="iceIn" placeholder="ICE (optional)" />
        <input id="notesIn" placeholder="Medical notes (optional)" />
        <button id="saveWalletBtn">Save</button>
      </div>
    </section>

    <!-- Doctor Dashboard -->
    <section id="dashboard" class="card">
      <h2>Doctor Dashboard (Demo)</h2>
      <p class="muted">Pick a patient to view trends & latest vitals.</p>

      <div class="row" style="gap:8px;margin:8px 0; align-items:center">
        <select id="ptSelect" aria-label="Select patient"></select>
        <button id="ptRefreshBtn">Refresh</button>
      </div>

      <!-- KPI strip -->
      <div class="row" style="gap:12px;flex-wrap:wrap">
        <div class="kpi" id="kpiHr">HR: — <span class="delta"></span></div>
        <div class="kpi" id="kpiSpO2">SpO₂: — <span class="delta"></span></div>
        <div class="kpi" id="kpiBp">BP: — <span class="delta"></span></div>
        <div class="kpi" id="kpiRr">RR: — <span class="delta"></span></div>
        <div class="kpi" id="kpiTemp">Temp: — <span class="delta"></span></div>
        <div class="badge" id="riskBadge">Risk: —</div>
        <div class="badge" id="statusBadge">Status: —</div>
      </div>

      <!-- Small charts -->
      <div class="grid2" style="margin-top:10px">
        <canvas id="chartHr" height="160"></canvas>
        <canvas id="chartSpO2" height="160"></canvas>
      </div>
      <div class="grid2" style="margin-top:10px">
        <canvas id="chartBp" height="160"></canvas>
        <canvas id="chartRrTemp" height="160"></canvas>
      </div>

      <!-- 24h summary table -->
      <h3 style="margin-top:10px">24h Range</h3>
      <table class="table" id="rangeTable">
        <thead><tr><th>Metric</th><th>Min</th><th>Max</th></tr></thead>
        <tbody></tbody>
      </table>

      <div id="dashStatus" class="status" aria-live="polite"></div>
    </section>
  </main>

  <footer class="footer">© SVAI — Hackathon demo</footer>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <!-- CivicBot Mini Chat (phone-like) — CSS :target to open/close -->
  <div id="civicModal" class="modal">
    <div class="phone" role="dialog" aria-modal="true" aria-labelledby="civicTitle">
      <div class="phone-header">
        <strong id="civicTitle">SVAI CivicBot</strong>
        <!-- Close by un-targeting the hash -->
        <a href="#" id="civicClose" aria-label="Close" class="close-x">×</a>
      </div>
      <div id="civicChat" class="phone-chat">
        <div class="bot">Hi! Ask about a patient, e.g. “How is the patient Amina E.?”</div>
      </div>
      <div class="phone-input">
        <input id="civicInput" placeholder="Type your question…" />
        <button id="civicSend">Send</button>
      </div>
    </div>
  </div>

  <!-- app -->
  <script src="script.js"></script>
</body>
</html>
